Kubernetes Management Server Setup

Purpose
- Prepare an Ubuntu EC2 instance to manage Amazon EKS clusters (install `awscli`, `kubectl`, and `eksctl`).

Prerequisites
- An EC2 instance (Ubuntu) to act as the management host
- An IAM role attached to the instance with permissions for EKS and related resources (EC2, IAM, VPC, S3, CloudFormation, EKS)
- SSH access to the instance
- Basic tools: `curl`, `unzip`, `sudo`

Steps

1) Launch an Ubuntu EC2 instance
- Choose the appropriate CPU architecture: `amd64` (x86_64) or `arm64`.
- Attach an IAM role that grants the instance the necessary permissions to create/manage EKS clusters and related resources.

2) Install AWS CLI
Run these commands on the EC2 instance:

curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install

Verify:

aws --version

3) Install kubectl
- Download the kubectl binary for your platform/version. Example for EKS 1.34 (amd64):

curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.34.2/2025-11-13/bin/linux/amd64/kubectl
chmod +x ./kubectl
sudo mv ./kubectl /usr/local/bin/

Verify:

kubectl version --client

4) Install eksctl
- Set `ARCH` to `amd64` or `arm64` depending on your instance.

ARCH=amd64
PLATFORM=$(uname -s)_$ARCH

curl -sLO "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz"
tar -xzf eksctl_$PLATFORM.tar.gz -C /tmp && rm eksctl_$PLATFORM.tar.gz
sudo install -m 0755 /tmp/eksctl /usr/local/bin && rm /tmp/eksctl

Verify:

eksctl version

5) Confirm everything works
- `aws --version`
- `kubectl version --client`
- `eksctl version`

6) Create EKS cluster and nodes from EC2 Management Host
   eksctl create cluster --name cluster-name  \
   --region region-name \
   --node-type instance-type \
   --nodes-min 2 \
   --nodes-max 2 \ 
   --zones <AZ-1>,<AZ-2>

   ex- 
   eksctl create cluster --name chatbot-cluster --region ap-south-1 --node-type t2.medium --nodes-min 2 --nodes-max 2

7) Validate your cluster by checking nodes
kubectl get nodes

8) delete the EKS clsuter
eksctl delete cluster chatbot-cluster --region ap-south-1